# 📄 Product Requirements Document (PRD) – for AI Chat Skill Assessment & Learning Path Generation

**Feature:** AI Chat Skill Assessment & Learning Path Generation  
**Product:** Sawaed Youth Platform

---

## 1. Overview

The **AI Chat Skill Assessment** feature enables Omani youth to interact with an AI in a conversational format to determine their current level in a selected skill (e.g., Critical Thinking, Problem Solving, Digital Literacy).

At the end of the chat, the AI outputs a **structured JSON object** containing:

- The assessed skill
- The determined level
- Confidence score (internal only)
- Reasoning (internal only, stored in DB)
- A personalized learning path (3–6 modules, based on templates included in the system prompt but adapted dynamically)

This JSON is then used by the platform to generate a **Learning Path Preview** and update the user’s dashboard.

---

## 2. Goals & Objectives

- Provide youth with an **engaging, conversational assessment** instead of static tests.
- Ensure assessments are **aligned with skill definitions & levels** from the skills document.
- Generate **personalized learning paths** dynamically, tailored to the youth’s level.
- Store results in the **Convex DB** for tracking progress and re-assessment.
- Enable **progression loops**: after completing modules, youth can re-enter chat to level up.

---

## 3. User Stories

### Primary User (Youth)

- _As a youth_, I want to select a skill and chat with the AI so that I can know my current level.
- _As a youth_, I want the AI to give me a clear learning path so I know what to study next.
- _As a youth_, I want the chat to feel natural and engaging, not like a boring test.

### Secondary User (Admin / Ministry)

- _As an admin_, I want to see aggregated data of youth skill levels for policymaking.
- _As an admin_, I want to ensure the AI only assesses skills defined in the official document.

---

## 4. Scope

### In-Scope

- AI chat interface (frontend).
- AI conversation flow (Gemini Flash).
- JSON output with `{ skill, level, confidence, reasoning, modules }`.
- Learning path preview UI.
- Convex DB integration (store assessments, levels, modules).
- Re-assessment after module completion.
- Dynamic adaptation of AI questions based on user responses.
- Module templates included in **system prompt**.

### Out-of-Scope (Future Phases)

- AI-curated external resources (YouTube, Coursera, etc.).
- Gamification (badges, streaks).
- Ministry dashboards.
- Admin override of AI assessments.

---

## 5. Functional Requirements

### 5.1 Skill Selection

- User selects a skill from a dropdown (skills come from DB).
- User is redirected to AI Chat UI.

### 5.2 AI Chat

- AI receives:
  - Selected skill
  - User profile (age, education, interests, past progress)
  - Skill definition + levels (from DB)
  - Module templates (from system prompt)
- AI engages in **3–5 minutes of free-flowing conversation**.
- AI dynamically adapts difficulty of questions:
  - If user answers strongly, AI escalates to harder scenarios.
  - If user struggles, AI simplifies and probes fundamentals.
- AI must always output a level (if uncertain, choose lower).

### 5.3 JSON Output

- At the end of the chat, AI outputs **only JSON** in this format:

```json
{
  "skill": "Critical Thinking",
  "level": 3,
  "confidence": 0.8,
  "reasoning": "User can distinguish fact vs opinion but struggles with bias detection",
  "modules": [
    {
      "title": "Foundations of Critical Thinking",
      "type": "article",
      "duration": "6 min"
    },
    { "title": "Fact vs Opinion", "type": "video", "duration": "8 min" },
    { "title": "Bias Detection Exercise", "type": "quiz", "duration": "10 min" }
  ]
}
```

- **Validation**: Backend validates JSON against schema. If invalid, AI is re-prompted.
- **Confidence & Reasoning**: Stored internally in DB, not shown to youth.

### 5.4 Learning Path Generation

- Modules (3–6) are generated by AI.
- **Hybrid approach**:
  - Base templates per skill level are included in the **system prompt**.
  - AI adapts module titles, types, and durations dynamically based on user’s level and responses.
- Types: `article`, `video`, `quiz`, `project`.
- Duration: 5–15 min.
- Stored in DB and displayed in **Learning Path Preview**.

### 5.5 Progression Loop

- After completing modules, user re-enters chat.
- AI re-assesses skill level.
- If user passes, new JSON is generated with next level + new modules.
- Repeat until max level for that skill.

---

## 6. Non-Functional Requirements

- **Performance**: AI response time < 3s per message (Gemini Flash).
- **Scalability**: Support 10k+ concurrent youth assessments.
- **Security**: API keys hidden (server-side calls).
- **Data Privacy**: Store only anonymized assessment data for ministry insights.
- **Accessibility**: Chat UI must support Arabic (RTL) and English (LTR).

---

## 7. System Design

### 7.1 Frontend (Next.js)

- **Skill Selection Page** → Dropdown → Redirect to Chat.
- **AI Chat UI** → Real-time conversation.
- **JSON Detection** → Ends chat, shows “Assessment Complete”.
- **Dashboard** → Shows Learning Path Preview.

### 7.2 Backend (Convex)

- Stores:
  - User profile
  - Skill definitions + levels
  - Assessment results (JSON)
  - Learning paths
- Functions:
  - `startAssessment(userId, skill)`
  - `storeAssessment(userId, skill, jsonResult)`
  - `getLearningPath(userId, skill)`

### 7.3 AI (Gemini Flash)

- **System Prompt** includes:
  - Role: “AI youth skills assessor”
  - Rules: free-flowing, always output JSON, modules 3–6, no hallucination of skills
  - Injected context: skill definition + levels + user profile
  - Module templates for each skill level (to guide AI)
  - Instruction: dynamically adapt difficulty of questions

---

## 8. Success Metrics

- **Engagement**: Avg. chat duration 3–5 minutes.
- **Completion**: % of users who reach JSON output.
- **Accuracy**: % of AI assessments validated by human reviewers.
- **Progression**: % of users who complete modules and re-assess.
- **Adaptivity**: % of conversations where AI escalates or simplifies questions appropriately.

---

## 9. Risks & Mitigations

- **Risk**: AI outputs invalid JSON → Mitigation: schema validation + re-prompt.
- **Risk**: AI hallucinates skills not in DB → Mitigation: inject skill definitions only.
- **Risk**: Youth drop off mid-chat → Mitigation: keep chat short, engaging, gamified.
- **Risk**: Latency → Mitigation: use Gemini Flash (fast inference).
- **Risk**: Modules too generic → Mitigation: templates in system prompt + AI adaptation.
